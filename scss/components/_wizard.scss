$height-wizard: rem(6) !default;
$size-current-pin: rem(16) !default;

.wizard {
	height: $height-wizard;
	display: flex;

	&-container {
		padding-left: rem(
			2
		); // "optical" alignment, difficult to align text and circle ^^
	}

	&-marker {
		display: flex;
		width: $size-current-pin;
		height: $size-current-pin;
		margin-left: -1px; // trick for high zoom level ^^
		border-radius: 50%;
		position: relative;
		top: -#{$height-wizard - rem(1)};
		background-image: radial-gradient(
			circle,
			var(--primary) 0,
			var(--primary) #{$height-wizard/2},
			transparent #{$height-wizard/2}
		);
	}
	&-marker-icon {
		&#{&} {
			fill: var(--primary-contrast);
		}
	}

	&-item {
		background: var(--background-strong);
		position: relative;

		&:not(:last-child) {
			@extend .flex-item-fluid;
		}

		// positionned first element always with a aria-current/is-complete
		&:first-child {
			background: none;
			background-image: linear-gradient(
				to left,
				var(--background-strong) 0,
				var(--background-strong) calc(100% - #{$height-wizard/2}),
				transparent calc(100% - #{$height-wizard/2})
			);
		}

		&:last-child {
			background: none;
			background-image: linear-gradient(
				to right,
				var(--background-strong) 0,
				var(--background-strong) 50%,
				transparent 50%
			);

			&.is-complete::after {
				content: none;
			}
		}

		&.is-complete {
			.wizard-marker {
				background-color: var(--primary);
				position: relative;
				top: -#{$height-wizard - rem(1)};
			}
		}

		&[aria-current='step'] {
			.wizard-marker {
				background-image: radial-gradient(
					circle,
					var(--primary-contrast) 0,
					var(--primary-contrast) #{$height-wizard/2},
					var(--primary) #{$height-wizard/2}
				);
			}
		}

		&.is-complete::before {
			content: '';
			background: var(--primary);
		}

		&.is-complete::after {
			content: '';
			position: relative;
			display: block;
			width: 100%;
			height: $height-wizard;
			top: -$size-current-pin;
			background-color: var(--primary);
		}

		// &[aria-current='step'] &-inner {
		// 	position: absolute;
		// 	top: 0;
		// 	left: 0;
		// 	font-size: rem(20);
		// 	font-weight: bold;
		// }

		// &:not([aria-current]) &-inner {
		// 	@extend .invisible;
		// }
	}

	&-container--no-text-displayed &-item[aria-current='step'] &-item-inner {
		@extend .invisible;
	}

	&-label {
		flex: 1;
		text-align: center;

		&:first-child {
			text-align: left;
		}
		&:last-child {
			text-align: right;
		}

		&.is-complete {
			opacity: 0.5;
		}

		&[aria-current='step'] {
			font-size: 1em;
			font-weight: 600;
		}
	}
}
